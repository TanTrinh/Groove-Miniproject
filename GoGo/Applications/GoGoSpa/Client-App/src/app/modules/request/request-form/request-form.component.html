<div class="container-fluid">
  <div class="border-custom">
    <h1 [hidden]="!isCreateFormMode">Create Request</h1>
    <h1 [hidden]="!isUpdateFormMode">Update Request</h1>
    <h1 [hidden]="!isViewFormMode">Request Detail</h1>
  </div>
  <div class="container-fluid row pt-3">

    <div class="card col-lg-4 col-md-6 col-sm-12">
      <div class="card-block">
        <form class="k-form" #mainForm="ngForm" name="mainForm" (ngSubmit)="onSubmitForm(mainForm)">
          <fieldset>
            <legend *ngIf="!isCreateFormMode">
              <span>{{formData.code}} - {{requestStatus}}</span>
            </legend>
            <legend *ngIf="isCreateFormMode">
              <span>Create</span>
            </legend>

            <div class="btn-wrapper">
              <button *ngIf="!isUpdateFormMode" type="button" class="btn btn-secondary btn-sm mr-1 mb-1" (click)="onNavigateToListPage()">Back to List</button>
              <button *ngIf="isUpdateFormMode" type="button" class="btn btn-secondary btn-sm mr-1 mb-1" (click)="onNavigateToViewPage()">Cancel</button>
              <button *ngIf="!isViewFormMode" type="submit" class="btn btn-primary btn-sm mb-1">Save</button>
              <button *ngIf="isViewFormMode" type="button" routerLink="/request/form/update/{{formData?.id}}" class="btn btn-info btn-sm mr-1 mb-1">Update</button>
              <button type="button" class="btn btn-primary btn-sm btn-width mr-1 mb-1" *ngIf="isViewFormMode && (requestStatus == 'not accepted')"
                      (click)="onClickStatus(formData)">
                {{onLoadGrid(formData.status)}}
              </button>
            </div>

            <div class="form-group">
              <label for="receiverName">Receiver Name </label>
              <input type="text" class="form-control" [(ngModel)]="formData.receiverName" name="receiverName" #receiverName="ngModel" required [readonly]="isViewFormMode">
              <div *ngIf="receiverName.invalid && (receiverName.dirty || receiverName.touched)"
                   class="alert alert-danger">
                <div *ngIf="receiverName.errors.required">
                  Receiver Name is required.
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="receiverPhoneNumber">Receiver PhoneNumber</label>
              <input type="text" class="form-control" [(ngModel)]="formData.receiverPhoneNumber" name="receiverPhoneNumber" #receiverPhoneNumber="ngModel" required [readonly]="isViewFormMode">
              <div *ngIf="receiverPhoneNumber.invalid && (receiverPhoneNumber.dirty || receiverPhoneNumber.touched)"
                   class="alert alert-danger">
                <div *ngIf="receiverPhoneNumber.errors.required">
                  Receiver PhoneNumber is required.
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="packageQuantity">Package Quantity</label>
              <input type="text" class="form-control" [(ngModel)]="formData.packageQuantity" name="packageQuantity" #packageQuantity="ngModel" required [readonly]="isViewFormMode">
              <div *ngIf="packageQuantity.invalid && (packageQuantity.dirty || packageQuantity.touched)"
                   class="alert alert-danger">
                <div *ngIf="packageQuantity.errors.required">
                  Package Quantity is required.
                </div>
              </div>
            </div>

            <div class="form-group" *ngIf="!isViewFormMode">
              <label>Picking Date</label>
              <div class="row px-3">
                <kendo-datepicker class="col form-control" [(ngModel)]="formData.pickingDate" name="formData.pickingDate"></kendo-datepicker>&nbsp;
                <kendo-timepicker class="col form-control" [(ngModel)]="formData.pickingDate" name="formData.pickingDate"></kendo-timepicker>
              </div>
            </div>
            <div class="form-group" *ngIf="isViewFormMode">
              <label>Picking Date</label>
              <div class="row px-3">
                <input type="text" class="form-control" value="{{formData.pickingDate | date: 'M/d/y, h:mm a'}}" required readonly>
              </div>
            </div>

            <div class="form-group" *ngIf="!isViewFormMode">
              <label>Expected Date</label>
              <div class="row px-3">
                <kendo-datepicker class="col form-control" [(ngModel)]="formData.expectedDate" name="formData.expectedDate"></kendo-datepicker>&nbsp;
                <kendo-timepicker class="col form-control" [(ngModel)]="formData.expectedDate" name="formData.expectedDate"></kendo-timepicker>
              </div>
            </div>
            <div class="form-group" *ngIf="isViewFormMode">
              <label>Expected Date</label>
              <div class="row px-3">
                <input type="text" class="form-control" value="{{formData.expectedDate | date: 'M/d/y, h:mm a'}}" required readonly>
              </div>
            </div>

            <div class="form-group" *ngIf="!isViewFormMode">
              <label for="wareHouse">Vehicle Feature</label>
              <kendo-combobox class="form-control" [(ngModel)]="formData.vehicleFeature" name="formData.vehicleFeature" #vehicleFeature="ngModel" required
                              [data]="vehicleFeatureList"
                              [valueField]="'value'"
                              [textField]="'displayName'"
                              [filterable]="true"
                              (filterChange)="filterVehicleFeature($event)">
              </kendo-combobox>
              <div *ngIf="vehicleFeature.invalid && (vehicleFeature.dirty || vehicleFeature.touched)"
                   class="alert alert-danger">
                <div *ngIf="vehicleFeature.errors.required">
                  Vehicle Feature is required.
                </div>
              </div>
            </div>
            <div class="form-group" *ngIf="isViewFormMode">
              <label>Vehicle Feature</label>
              <input type="text" class="form-control" value="{{formData.vehicleFeature.displayName}}" required readonly>
            </div>

            <div class="form-group" *ngIf="!isViewFormMode">
              <label for="wareHouse">Warehouse</label>
              <kendo-combobox class="form-control" [(ngModel)]="formData.wareHouse" name="formData.wareHouse" #wareHouse="ngModel" required
                              [data]="warehouseList"
                              [valueField]="'value'"
                              [textField]="'displayName'"
                              [filterable]="true"
                              (filterChange)="filterWarehouse($event)">
              </kendo-combobox>
              <div *ngIf="wareHouse.invalid && (wareHouse.dirty || wareHouse.touched)"
                   class="alert alert-danger">
                <div *ngIf="wareHouse.errors.required">
                  Warehouse is required.
                </div>
              </div>
            </div>
            <div class="form-group" *ngIf="isViewFormMode">
              <label>Warehouse</label>
              <input type="text" class="form-control" value="{{formData.wareHouse.displayName}}" required readonly>
            </div>


            <div class="form-group">
              <label for="address">Delivery Address</label>
              <input type="text" class="form-control" [(ngModel)]="formData.address" name="address" #address="ngModel" required [readonly]="isViewFormMode">
              <div *ngIf="address.invalid && (address.dirty || address.touched)"
                   class="alert alert-danger">
                <div *ngIf="address.errors.required">
                  Delivery Address is required.
                </div>
              </div>
            </div>

            <!--<div class="form-group">
    <label for="deliveryLatitude">Delivery Latitude</label>
    <input type="text" class="form-control" value="110" [(ngModel)]="formData.deliveryLatitude" name="deliveryLatitude" #deliveryLatitude="ngModel" required [readonly]="isViewFormMode">
    <div *ngIf="deliveryLatitude.invalid && (deliveryLatitude.dirty || deliveryLatitude.touched)"
         class="alert alert-danger">
      <div *ngIf="deliveryLatitude.errors.required">
        Delivery Latitude is required.
      </div>
    </div>
  </div>-->
            <!--<div class="form-group ">
    <label for="deliveryLongitude">Delivery Longitude</label>
    <input type="text" class="form-control" value="110" [(ngModel)]="formData.deliveryLongitude" name="deliveryLongitude" #deliveryLongitude="ngModel" required [readonly]="isViewFormMode">
    <div *ngIf="deliveryLongitude.invalid && (deliveryLongitude.dirty || deliveryLongitude.touched)"
         class="alert alert-danger">
      <div *ngIf="deliveryLongitude.errors.required">
        Delivery Longitude is required.
      </div>
    </div>
  </div>-->
          </fieldset>
        </form>
      </div>
    </div>
    <div class="col-lg-8 col-md-6 col-sm-12"> 
      <app-ggmap></app-ggmap>
    </div>

  </div>

</div>
